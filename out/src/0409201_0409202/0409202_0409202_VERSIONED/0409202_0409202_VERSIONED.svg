<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="674px" preserveAspectRatio="none" style="width:914px;height:674px;background:#FFFFFF;" version="1.1" viewBox="0 0 914 674" width="914px" zoomAndPan="magnify"><defs/><g><path d="M135,10 L135,36.3516 L580,36.3516 L580,20 L570,10 L135,10 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M570,10 L570,20 L580,20 L570,10 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="424" x="141" y="28.4951">Процесс стартует каждый час (как проверяем что он ОК, не упал, итп)</text><ellipse cx="105" cy="23.1758" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M718,302.0391 L718,377.4453 L902,377.4453 L902,312.0391 L892,302.0391 L718,302.0391 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M892,302.0391 L892,312.0391 L902,312.0391 L892,302.0391 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="724" y="320.5342">Для проверки периода</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="724" y="336.8857">"сбора" или "замен"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="724" y="353.2373">создаем/используем</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="724" y="369.5889">справочник (см. таблица 2)</text><path d="M525,310.793 L525,386.1992 L694,386.1992 L694,320.793 L684,310.793 L525,310.793 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M684,310.793 L684,320.793 L694,320.793 L684,310.793 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="531" y="329.2881">Новый отчет или нет</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="531" y="345.6396">определяем по сверке</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="531" y="361.9912">уникального кода отчета</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="531" y="378.3428">в  OAD</text><rect fill="#F1F1F1" height="65.2813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="64.5" y="189.2031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61" x="74.5" y="211.6602">загружаем</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="54" x="74.5" y="226.7539">сведения</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="74.5" y="241.8477">в витрину</text><path d="M227,353.3359 L227,461.4453 L483,461.4453 L483,363.3359 L473,353.3359 L227,353.3359 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M473,353.3359 L473,363.3359 L483,363.3359 L473,353.3359 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="233" y="371.8311">Для формы 202:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="233" y="388.1826">отчетная дата; рег. номер головной КО</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="233" y="404.5342">для формы 202I:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="233" y="420.8857">отчетная дата;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="233" y="437.2373">для формы 201;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="233" y="453.5889">отчетная дата; ТУ</text><rect fill="#F1F1F1" height="65.2813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="38" y="340.9102"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="48" y="363.3672">обновляем метку</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76" x="48" y="378.4609">актуальности</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="48" y="393.5547">для "старой" записи</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="25" y="441.1914"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="35" y="463.6484">обновляем сведения</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="35" y="478.7422">об изменениях в данных</text><polygon fill="#F1F1F1" points="32,274.4844,178,274.4844,190,295.2383,178,315.9922,32,315.9922,20,295.2383,32,274.4844" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="109" y="327.4111">да</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146" x="32" y="285.9033">отчет по такой организации,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="35" y="299.7393">на такую отчетную дату</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="35" y="313.5752">уже есть в витрине</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="190" y="292.8213">нет</text><polygon fill="#F1F1F1" points="105,511.3789,117,523.3789,105,535.3789,93,523.3789,105,511.3789" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="35.5,122.7773,174.5,122.7773,186.5,143.5313,174.5,164.2852,35.5,164.2852,23.5,143.5313,35.5,122.7773" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="109" y="175.7041">да</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="35.5" y="134.1963">есть новые отчеты,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="35.5" y="148.0322">которые еще не загружены</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="35.5" y="161.8682">в витрину</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="186.5" y="141.1143">нет</text><polygon fill="#F1F1F1" points="105,555.3789,117,567.3789,105,579.3789,93,567.3789,105,555.3789" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="44.5,56.3516,165.5,56.3516,177.5,77.1055,165.5,97.8594,44.5,97.8594,32.5,77.1055,44.5,56.3516" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="109" y="109.2783">нет</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="44.5" y="67.7705">текущая дата попадает</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="44.5" y="81.6064">в период сбора или</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="44.5" y="95.4424">период замен</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="177.5" y="74.6885">да</text><polygon fill="#F1F1F1" points="105,599.3789,117,611.3789,105,623.3789,93,611.3789,105,599.3789" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="105" cy="653.3789" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="98.8128" x2="111.1872" y1="647.1917" y2="659.5661"/><line style="stroke:#222222;stroke-width:2.5;" x1="111.1872" x2="98.8128" y1="647.1917" y2="659.5661"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="406.1914" y2="441.1914"/><polygon fill="#181818" points="101,431.1914,105,441.1914,109,431.1914,105,435.1914" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="315.9922" y2="340.9102"/><polygon fill="#181818" points="101,330.9102,105,340.9102,109,330.9102,105,334.9102" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="190" x2="202" y1="295.2383" y2="295.2383"/><polygon fill="#181818" points="198,401.7676,202,411.7676,206,401.7676,202,405.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="202" x2="202" y1="295.2383" y2="523.3789"/><line style="stroke:#181818;stroke-width:1.0;" x1="202" x2="117" y1="523.3789" y2="523.3789"/><polygon fill="#181818" points="127,519.3789,117,523.3789,127,527.3789,123,523.3789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="491.3789" y2="511.3789"/><polygon fill="#181818" points="101,501.3789,105,511.3789,109,501.3789,105,505.3789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="254.4844" y2="274.4844"/><polygon fill="#181818" points="101,264.4844,105,274.4844,109,264.4844,105,268.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="164.2852" y2="189.2031"/><polygon fill="#181818" points="101,179.2031,105,189.2031,109,179.2031,105,183.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="493" y1="143.5313" y2="143.5313"/><polygon fill="#181818" points="489,342.873,493,352.873,497,342.873,493,346.873" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="493" x2="493" y1="143.5313" y2="567.3789"/><line style="stroke:#181818;stroke-width:1.0;" x1="493" x2="117" y1="567.3789" y2="567.3789"/><polygon fill="#181818" points="127,563.3789,117,567.3789,127,571.3789,123,567.3789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="535.3789" y2="555.3789"/><polygon fill="#181818" points="101,545.3789,105,555.3789,109,545.3789,105,549.3789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="97.8594" y2="122.7773"/><polygon fill="#181818" points="101,112.7773,105,122.7773,109,112.7773,105,116.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177.5" x2="704" y1="77.1055" y2="77.1055"/><polygon fill="#181818" points="700,334.1191,704,344.1191,708,334.1191,704,338.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704" x2="704" y1="77.1055" y2="611.3789"/><line style="stroke:#181818;stroke-width:1.0;" x1="704" x2="117" y1="611.3789" y2="611.3789"/><polygon fill="#181818" points="127,607.3789,117,611.3789,127,615.3789,123,611.3789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="579.3789" y2="599.3789"/><polygon fill="#181818" points="101,589.3789,105,599.3789,109,589.3789,105,593.3789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="33.1758" y2="56.3516"/><polygon fill="#181818" points="101,46.3516,105,56.3516,109,46.3516,105,50.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="105" x2="105" y1="623.3789" y2="643.3789"/><polygon fill="#181818" points="101,633.3789,105,643.3789,109,633.3789,105,637.3789" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[8dd7071e984aaa52344b81b5e25dad41]
@startuml
start 
floating note right: Процесс стартует каждый час (как проверяем что он ОК, не упал, итп)
 if (текущая дата попадает
в период сбора или 
период замен) then (да)
note right
Для проверки периода
"сбора" или "замен"
создаем/используем
справочник (см. таблица 2)
end note
 else (нет)
  if (есть новые отчеты,
которые еще не загружены
в витрину) then (да)
note right
Новый отчет или нет
определяем по сверке
уникального кода отчета
в  OAD
end note
 :загружаем 
 сведения 
 в витрину;
 if (отчет по такой организации,
 на такую отчетную дату
 уже есть в витрине) then (нет)
 note right
Для формы 202:
отчетная дата; рег. номер головной КО
для формы 202I:
отчетная дата;
для формы 201;
отчетная дата; ТУ
end note
 else (да)
 :обновляем метку
 актуальности 
 для "старой" записи;
 :обновляем сведения 
 об изменениях в данных;
 endif
else (нет)
endif

 endif
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 20:01:30 MSK 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1251
Language: ru
Country: RU
--></g></svg>